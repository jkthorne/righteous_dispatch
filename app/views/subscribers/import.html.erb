<% content_for :title, "Import Subscribers - RighteousDispatch" %>

<div class="max-w-lg mx-auto">
  <div class="mb-6">
    <div class="text-[10px] text-base-content/60 mb-2">
      <%= link_to "SUBSCRIBERS", subscribers_path, class: "hover:underline" %> / IMPORT
    </div>
    <h1 class="text-lg sm:text-xl font-bold">IMPORT SUBSCRIBERS</h1>
  </div>

  <div class="border border-base-content/20">
    <div class="bg-base-content/5 p-3 border-b border-base-content/20">
      <div class="text-[10px] sm:text-xs font-bold">CSV IMPORT</div>
    </div>
    <div class="p-4 sm:p-6">
      <p class="text-[10px] sm:text-xs text-base-content/60 mb-4">
        Upload a CSV file with your subscribers. The file should have headers and include at minimum an <strong>email</strong> column.
      </p>

      <div class="bg-base-content/5 border border-base-content/10 p-3 mb-4">
        <div class="text-[10px] font-bold text-base-content/60 mb-2">EXPECTED CSV FORMAT:</div>
        <code class="text-[10px] text-base-content/80">email,first_name,last_name</code><br>
        <code class="text-[10px] text-base-content/60">john@example.com,John,Doe</code><br>
        <code class="text-[10px] text-base-content/60">jane@example.com,Jane,Smith</code>
      </div>

      <%= form_with url: process_import_subscribers_path, method: :post, multipart: true, class: "space-y-4" do |f| %>
        <div>
          <label class="text-[10px] text-base-content/60 mb-1 block font-bold">SELECT CSV FILE</label>
          <%= f.file_field :file, accept: ".csv",
              class: "w-full border border-base-content/20 bg-base-100 px-3 py-2 text-xs focus:border-primary focus:outline-none" %>
        </div>

        <div class="pt-2 flex items-center gap-3">
          <%= f.submit "IMPORT SUBSCRIBERS",
              class: "bg-primary text-primary-content hover:bg-primary/80 px-4 py-2 text-[10px] sm:text-xs font-bold transition-colors cursor-pointer" %>
          <%= link_to "CANCEL", subscribers_path, class: "text-[10px] text-base-content/60 hover:underline font-bold" %>
        </div>
      <% end %>
    </div>
  </div>

  <div class="mt-4 border border-info/30 bg-info/10 p-4">
    <div class="text-[10px] text-info font-bold mb-2">NOTES</div>
    <ul class="text-[10px] text-base-content/80 space-y-1">
      <li>- Duplicate emails will be skipped</li>
      <li>- All imported subscribers will be marked as "confirmed"</li>
      <li>- You can also use a "name" column which will be split into first/last name</li>
    </ul>
  </div>
</div>
