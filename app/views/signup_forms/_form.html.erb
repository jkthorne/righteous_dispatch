<%= form_with model: signup_form, class: "space-y-4" do |f| %>
  <% if signup_form.errors.any? %>
    <div class="bg-error/10 border border-error/30 p-4">
      <div class="text-[10px] font-bold text-error mb-2">PLEASE FIX THE FOLLOWING ERRORS:</div>
      <ul class="text-[10px] text-error space-y-1">
        <% signup_form.errors.full_messages.each do |message| %>
          <li>- <%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div>
    <label class="text-[10px] text-base-content/60 mb-1 block font-bold">FORM NAME (INTERNAL USE)</label>
    <%= f.text_field :title, required: true,
        class: "w-full border border-base-content/20 bg-base-100 px-3 py-2 text-sm focus:border-primary focus:outline-none",
        placeholder: "e.g., Homepage Signup, Blog Sidebar" %>
    <p class="text-[10px] text-base-content/40 mt-1">Only visible to you, not shown on the form</p>
  </div>

  <div>
    <label class="text-[10px] text-base-content/60 mb-1 block font-bold">HEADLINE</label>
    <%= f.text_field :headline,
        class: "w-full border border-base-content/20 bg-base-100 px-3 py-2 text-sm focus:border-primary focus:outline-none",
        placeholder: "Subscribe to our newsletter" %>
  </div>

  <div>
    <label class="text-[10px] text-base-content/60 mb-1 block font-bold">DESCRIPTION (OPTIONAL)</label>
    <%= f.text_area :description, rows: 2,
        class: "w-full border border-base-content/20 bg-base-100 px-3 py-2 text-sm focus:border-primary focus:outline-none",
        placeholder: "Get weekly updates delivered to your inbox" %>
  </div>

  <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
    <div>
      <label class="text-[10px] text-base-content/60 mb-1 block font-bold">BUTTON TEXT</label>
      <%= f.text_field :button_text,
          class: "w-full border border-base-content/20 bg-base-100 px-3 py-2 text-sm focus:border-primary focus:outline-none",
          placeholder: "Subscribe" %>
    </div>

    <div>
      <label class="text-[10px] text-base-content/60 mb-1 block font-bold">SUCCESS MESSAGE</label>
      <%= f.text_field :success_message,
          class: "w-full border border-base-content/20 bg-base-100 px-3 py-2 text-sm focus:border-primary focus:outline-none",
          placeholder: "Thanks for subscribing!" %>
    </div>
  </div>

  <% if @tags.any? %>
    <div>
      <label class="text-[10px] text-base-content/60 mb-2 block font-bold">AUTO-TAG NEW SUBSCRIBERS</label>
      <div class="flex flex-wrap gap-2">
        <% @tags.each do |tag| %>
          <label class="inline-flex items-center gap-2 bg-base-content/5 px-3 py-2 border border-base-content/10 cursor-pointer hover:bg-base-content/10 transition-colors">
            <%= f.check_box :tag_ids, { multiple: true, checked: signup_form.tags.include?(tag) }, tag.id, nil %>
            <span class="text-xs font-bold"><%= tag.name.upcase %></span>
          </label>
        <% end %>
      </div>
      <p class="text-[10px] text-base-content/40 mt-2">Selected tags will be automatically applied to new subscribers from this form</p>
    </div>
  <% end %>

  <div>
    <label class="inline-flex items-center gap-2 cursor-pointer">
      <%= f.check_box :active, class: "w-4 h-4" %>
      <span class="text-xs font-bold">FORM IS ACTIVE</span>
    </label>
    <p class="text-[10px] text-base-content/40 mt-1">Inactive forms will return a 404 error to visitors</p>
  </div>

  <div class="flex items-center gap-3 pt-4 border-t border-base-content/10">
    <%= f.submit signup_form.persisted? ? "UPDATE FORM" : "CREATE FORM",
        class: "bg-primary text-primary-content hover:bg-primary/80 px-6 py-2 text-[10px] sm:text-xs font-bold transition-colors cursor-pointer" %>
    <%= link_to "CANCEL", signup_forms_path,
        class: "bg-base-content/10 hover:bg-base-content/20 border border-base-content/20 px-6 py-2 text-[10px] sm:text-xs font-bold transition-colors" %>
  </div>
<% end %>
